doctype html
html(lang='en' ng-app="usersApp" )
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    meta(name='description', content='')
    meta(name='author', content='')
    title ЦДОТ - Пользователи
    // Bootstrap Core CSS
    link(href='stylesheets/bootstrap.min.css', rel='stylesheet')
    // MetisMenu CSS
    link(href='stylesheets/metisMenu.min.css', rel='stylesheet')
    // Custom CSS
    link(href='stylesheets/sb-admin-2.min.css', rel='stylesheet')
    // Morris Charts CSS
    link(href='stylesheets/morris.css', rel='stylesheet')
    link(href='stylesheets/style.css', rel='stylesheet')
    // Custom Fonts
    link(href='stylesheets/font-awesome.min.css', rel='stylesheet', type='text/css')
    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //if lt IE 9
      script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
      script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
  body(ng-controller="usersController")
    #wrapper
      // Navigation
      nav.navbar.navbar-default.navbar-static-top(role='navigation', style='margin-bottom: 0')
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand() ЦДОТ ХГУЭП
        // /.navbar-header
        ul.nav.navbar-top-links.navbar-right
         
          
          li.dropdown
            a.dropdown-toggle(data-toggle='dropdown', href='#' class="userName" )=lname + " " + fname
              i.fa.fa-user.fa-fw
              i.fa.fa-caret-down
            ul.dropdown-menu.dropdown-user

              li
                a(href='#')
                  i.fa.fa-gear.fa-fw
                  |  Настройки
              li.divider
              li
                a(href='/?logout=1')
                  i.fa.fa-sign-out.fa-fw
                  |  Выход
            // /.dropdown-user
          // /.dropdown
        // /.navbar-top-links
        .navbar-default.sidebar(role='navigation')
          .sidebar-nav.navbar-collapse
            ul#side-menu.nav

              li
                a(href='/')
                  i.fa.fa-dashboard.fa-fw
                  |  Главная страница
              li
                a(href='#')
                  i.fa.fa-bar-chart-o.fa-fw
                  |  Charts
                 
              li
                a(href='tables.html')
                  i.fa.fa-table.fa-fw
                  |  Tables

              li
                a(href='forms.html')
                  i.fa.fa-edit.fa-fw
                  |  Forms
              if rights == "rwd"
        
                li
                  a(href='/userEdit')
                    i.fa.fa-wrench.fa-fw
                    |  Управление пользователями
                  
                
              li
                a(href='forms.html')
                  i.fa.fa-graduation-cap.fa-fw
                  |  Студенты (Info)

              li
                a(href='forms.html')
                  i.fa.fa-user.fa-fw
                  |  Преподаватели (Info)
                  
                
                // /.nav-second-level
          // /.sidebar-collapse
        // /.navbar-static-side
      #page-wrapper
        .row
          .col-lg-12
            h1.page-header Пользователи
          // /.col-lg-12
        // /.row
        .row
          .col-lg-3.col-md-6
            .panel.panel-primary
              .panel-heading
                .row
                  .col-xs-3
                    i.fa.fa-database.fa-5x
                  .col-xs-9.text-right
                    .huge 26
                    div Студентов в базе
              a(href='#')
                .panel-footer
                  span.pull-left Студенты (Info)
                  span.pull-right
                    i.fa.fa-arrow-circle-right
                  .clearfix
          .col-lg-3.col-md-6
            .panel.panel-green
              .panel-heading
                .row
                  .col-xs-3
                    i.fa.fa-tasks.fa-5x
                  .col-xs-9.text-right
                    .huge 12
                    div Преподавателей
              a(href='#')
                .panel-footer
                  span.pull-left Преподаватели (Info)
                  span.pull-right
                    i.fa.fa-arrow-circle-right
                  .clearfix
          .col-lg-3.col-md-6
            .panel.panel-yellow
              .panel-heading
                .row
                  .col-xs-3
                    i.fa.fa-shopping-cart.fa-5x
                  .col-xs-9.text-right
                    .huge 124
                    div New Orders!
              a(href='#')
                .panel-footer
                  span.pull-left View Details
                  span.pull-right
                    i.fa.fa-arrow-circle-right
                  .clearfix
          .col-lg-3.col-md-6
            .panel.panel-red
              .panel-heading
                .row
                  .col-xs-3
                    i.fa.fa-support.fa-5x
                  .col-xs-9.text-right
                    .huge 13
                    div Support Tickets!
              a(href='#')
                .panel-footer
                  span.pull-left View Details
                  span.pull-right
                    i.fa.fa-arrow-circle-right
                  .clearfix
        .row
          .col-lg-9
            table.table.table-bordered.table-hover.table-striped.usersPanel(ng-init="loadUsers()")
                        thead
                          tr
                            th ID
                            th Имя
                            th Фалимия
                            th Уровень доступа
                            th(ng-show="editPanel")
                            th(ng-show="deletePanel")

                        tbody(ng-repeat="user in users")
                          tr
                            td {{user.id}}
                            td {{user.fname}}
                            td {{user.lname}}
                            td {{user.rights}}
                            td(ng-show="editPanel") 
                                a(href="#editUser" ng-click="userEdit(user.id, user.fname, user.lname, user.rights)" data-toggle="modal")
                                  i.fa.fa-pencil
                            td(ng-show="deletePanel")
                                a
                                  i.fa.fa-trash                              


          .col-lg-3
            ul.list-group.text-left.usersPanel
              a(ng-click="setEditPanelTrue()")
                li.list-group-item.editUserButton Редактировать
              a(ng-click="setDeletePanelTrue()")
                li.list-group-item.deleteUserButton Удалить
              
              


                         
              
            

    script(src='javascripts/angular.js')
    script(src='javascripts/usersAngular.js')
    script(src='javascripts/jquery.min.js')
    // Bootstrap Core JavaScript
    script(src='javascripts/bootstrap.min.js')
    // Metis Menu Plugin JavaScript

    script(src='javascripts/raphael.min.js')

    // Custom Theme JavaScript
    // HTML-код модального окна
    #editUser.modal.fade
      .modal-dialog.modal-lg
        .modal-content
          // Заголовок модального окна
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-hidden='true') ×
            h4.modal-title Редактирование пользователя
          // Основное содержимое модального окна
          .modal-body
            table.table.table-bordered.table-hover.table-striped.usersPanel
              thead
                tr
                  th ID
                  th Имя
                  th Фалимия
                  th Уровень доступа
              tbody
                tr
                  td(class="modalEditID") 
                  td(class="modalEditFname")
                    input.form-control 
                  td(class="modalEditLname") 
                    input.form-control
                  td(class="modalEditRights") 
                    select.form-control
                      option
                        | Трейтий уровень доступа
                      option
                        | Второй уровень доступа
                      option
                        | Первый уровень доступа

          // Футер модального окна
          .modal-footer
            button.btn.btn-default(type='button', data-dismiss='modal') Закрыть
            button.btn.btn-primary(type='button') Сохранить изменения
    // Скрипт, вызывающий модальное окно после загрузки страницы
    script.
      $(document).ready(function() {
      $("#myModalBox").modal('show');
      });


